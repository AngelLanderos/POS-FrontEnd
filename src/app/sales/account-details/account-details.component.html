<div class="grid grid-cols-5 gap-5">

  <button (click)="goBack()" class="col-span-1 input bg-zinc-950 text-xl font-bold hover:bg-zinc-800 hover:cursor-pointer">
    <svg xmlns="http://www.w3.org/2000/svg" width="40" height="24" viewBox="0 0 30 24">
      <path fill="#fff"
        d="m4 10l-.707.707L2.586 10l.707-.707zm17 8a1 1 0 1 1-2 0zM8.293 15.707l-5-5l1.414-1.414l5 5zm-5-6.414l5-5l1.414 1.414l-5 5zM4 9h10v2H4zm17 7v2h-2v-2zm-7-7a7 7 0 0 1 7 7h-2a5 5 0 0 0-5-5z"
        stroke-width="0.5" stroke="#fff" />
    </svg>Regresar</button>
  <label class="col-span-2 input w-full bg-neutral-100 shadow-xl text-xl text-black font-bold flex justify-center">Mesa
    #{{currentTableId()}}</label>

  <label class="col-span-2 input w-full bg-neutral-100 shadow-xl text-xl text-black font-bold">
    <svg xmlns="http://www.w3.org/2000/svg" width="36" height="36" viewBox="0 0 36 36">
      <circle cx="16.86" cy="9.73" r="6.46" fill="#1d4ed8" stroke-width="1" stroke="#1d4ed8" />
      <path fill="#1d4ed8" d="M21 28h7v1.4h-7z" stroke-width="1" stroke="#1d4ed8" />
      <path fill="#1d4ed8"
        d="M15 30v3a1 1 0 0 0 1 1h17a1 1 0 0 0 1-1V23a1 1 0 0 0-1-1h-7v-1.47a1 1 0 0 0-2 0V22h-2v-3.58a32 32 0 0 0-5.14-.42a26 26 0 0 0-11 2.39a3.28 3.28 0 0 0-1.88 3V30Zm17 2H17v-8h7v.42a1 1 0 0 0 2 0V24h6Z"
        stroke-width="1" stroke="#1d4ed8" />
    </svg>Atiende: <span class="font-normal">Angelica</span></label>
</div>

<div class="grid grid-cols-7 mt-5 h-[calc(100vh-7rem)]">

  <div class="col-span-5 mr-2 ">
    <div class="overflow-x-auto ">

      <table class="table table-sm bg-neutral-100 text-black rounded-lg">
        <!-- head -->
        <thead class="text-black bg-neutral-300">
          <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio unitario</th>
            <th>Cantidad a pagar</th>
            <th>Pagar todos</th>
          </tr>
        </thead>
        <tbody>
          @for (item of tableItems(); track $index) {
          <tr class="hover:bg-zinc-200">
            <th>{{item.name}}</th>
            <td>{{item.quantity - item.paid_quantity}}</td>
            <td>{{item.unit_price | currency}}</td>
            <td class="flex items-center gap-2">
              <button class="hover:bg-neutral-400 rounded-lg" (click)="increaseSelected(item.order_item_id)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path fill="#2c4bdb"
                    d="M13 6a1 1 0 1 0-2 0v5H6a1 1 0 1 0 0 2h5v5a1 1 0 1 0 2 0v-5h5a1 1 0 1 0 0-2h-5z"
                    stroke-width="0.5" stroke="#2c4bdb" />
                </svg>
              </button>

                <p class="font-semibold text-lg"> {{ selectedQuantities()[item.order_item_id] ?? 0}} </p>

              <button class=" hover:bg-neutral-400 rounded-lg" (click)="decreaseSelected(item.order_item_id)">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">
                  <path fill="none" stroke="#2c4bdb" stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                    d="M5 12h14" />
                </svg>
              </button>
            </td>
            <td>
              <input
  type="checkbox"
  class="checkbox checkbox-neutral hover:bg-blue-600"
  [checked]="isFullySelected(item)"
  (change)="toggleFullSelection(item, $event)"
/>

              </td>
              <!-- Checar este pedo -->
          </tr>
          }
          <!-- row 3 -->

        </tbody>
      </table>
    </div>
  </div>

  <div class="col-span-2 bg-neutral-100 rounded  h-[calc(100vh-10rem)] flex flex-col">
    <h1 class="text-black text-xl font-semibold text-center mt-3">Resumen de pago</h1>
    <div class="overflow-x-auto">

      <div class="mx-5 mt-4">
        <div class="flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 64 64">
            <path fill="#ac2222"
              d="M61.063 2H58.25v.896c-3.916.876-4.479 4.511-4.7 5.9c-.105.657-.318 1.942-.582 3.516H3.988c-1.938 0-2.155 1.811-1.902 2.813l5.746 25.367c.252 1.002 1.313 1.82 2.353 1.82h42.944c1.034 0 1.877.841 1.877 1.875s-.843 1.875-1.877 1.875H6.255a1.874 1.874 0 1 0 0 3.75h2.43a7.5 7.5 0 0 0-3.872 6.563h1.875c0 3.105 2.52 5.625 5.625 5.625s5.625-2.52 5.625-5.625h1.875a7.5 7.5 0 0 0-3.873-6.563h26.494a7.5 7.5 0 0 0-3.873 6.563h1.875a5.627 5.627 0 0 0 11.252 0h1.875a7.5 7.5 0 0 0-3.872-6.563h3.44a5.63 5.63 0 0 0 5.625-5.625a5.626 5.626 0 0 0-5.627-5.625h-.697l2.398-14.91c.668-3.938 2.108-12.445 2.446-14.561c.17-1.069.335-1.82.974-2.241v.774h2.813A.94.94 0 0 0 62 6.688v-3.75A.94.94 0 0 0 61.063 2m-48.75 57.188A2.816 2.816 0 0 1 9.5 56.375h5.625a2.816 2.816 0 0 1-2.812 2.813m33.75 0a2.816 2.816 0 0 1-2.814-2.813h5.627a2.82 2.82 0 0 1-2.813 2.813m-2.307-42.194a1.07 1.07 0 0 1 1.04-.932h5.937c.516 0 .875.416.794.927l-.588 3.771c-.078.51-.567.927-1.084.927h-5.663a.826.826 0 0 1-.841-.932zm-1.009 9.375a1.07 1.07 0 0 1 1.04-.932h5.483c.517 0 .875.416.797.927l-.443 2.834c-.079.51-.567.927-1.084.927h-5.257a.828.828 0 0 1-.841-.932zM6.866 20.777l-.95-3.805c-.124-.502.198-.91.715-.91h7.059c.518 0 .985.419 1.04.932l.404 3.762a.828.828 0 0 1-.84.932H8.033c-.516 0-1.042-.411-1.167-.911m3.271 9.348c-.516 0-1.042-.41-1.166-.91l-.716-2.867c-.125-.502.195-.91.712-.91h5.729c.517 0 .985.419 1.04.932l.304 2.824a.827.827 0 0 1-.84.932zm5.969 8.438h-3.865c-.519 0-1.042-.41-1.167-.91l-.716-2.867c-.124-.502.196-.91.714-.91h4.53c.517 0 .985.419 1.042.932l.302 2.824a.826.826 0 0 1-.84.931m11.492-.938a.94.94 0 0 1-.94.938h-4.891a1.07 1.07 0 0 1-1.039-.932l-.304-2.824a.825.825 0 0 1 .839-.932h5.395a.94.94 0 0 1 .94.938zm0-8.437a.94.94 0 0 1-.94.938H20.86c-.516 0-.982-.419-1.04-.932l-.302-2.824a.826.826 0 0 1 .839-.932h6.301a.94.94 0 0 1 .94.938zm0-8.438a.94.94 0 0 1-.94.938h-6.702a1.07 1.07 0 0 1-1.04-.932l-.404-3.762a.827.827 0 0 1 .84-.932h7.307a.94.94 0 0 1 .94.938v3.75zm10.159 16.881a1.07 1.07 0 0 1-1.04.932h-4.42a.94.94 0 0 1-.939-.938v-2.813a.94.94 0 0 1 .939-.938h4.924c.516 0 .896.419.84.932zm.906-8.438a1.07 1.07 0 0 1-1.04.932h-5.326a.94.94 0 0 1-.939-.938v-2.813a.94.94 0 0 1 .939-.938h5.83c.517 0 .896.419.839.932zm.906-8.437a1.07 1.07 0 0 1-1.04.932h-6.232a.94.94 0 0 1-.939-.938V17a.94.94 0 0 1 .939-.938h6.837c.517 0 .896.419.841.932zm7.232 17.807v-.007l-.008.007h-4.416c-.029 0-.054-.014-.083-.018c-.005-.034-.005-.068-.011-.104l-.044.092l.037.008c-.461-.053-.791-.434-.738-.91l.302-2.824a1.07 1.07 0 0 1 1.04-.932h5.076c.517 0 .873.416.795.927l-.443 2.834c-.077.51-.565.927-1.082.927z"
              stroke-width="1.5" stroke="#ac2222" />
          </svg>
          <h2 class="text-black font-semibold text-xl ml-2">Productos seleccionados: <span class="text-green-600"> {{selectedCount()}} </span></h2>
        </div>
        <div class="flex items-center mt-4">
          <h2 class="text-neutral-900 font-semibold text-xl ml-2">Subtotal: <span class="text-blue-600"> {{selectedSubtotal() | currency}} </span></h2>
        </div>
        <div class="flex items-center mt-1">
          <h2 class="text-neutral-900 font-semibold text-xl ml-2">Descuento: <span class="text-blue-500">0</span></h2>
        </div>
        <div class="flex items-center mt-1">
          <h2 class="text-neutral-900 font-semibold text-xl ml-2">TOTAL A PAGAR: <span class="text-red-400 font-bold">{{selectedSubtotal() | currency}}</span>
          </h2>
        </div>

      </div>

      <!-- <table class="table table-xs text-black mt-2 ">
        <thead>
          <tr>
            <th>Producto</th>
            <th>Cantidad</th>
            <th>Precio Unitario</th>
            <th>Subtotal</th>
            <th>Subtotal</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <th>1</th>
            <td>Cy Ganderton</td>
            <td>Quality Control Specialist</td>
            <td>Littel, Schaden and Vandervort</td>
            <td>Canada</td>
          </tr>
          <tr>
            <th>2</th>
            <td>Hart Hagerty</td>
            <td>Desktop Support Technician</td>
            <td>Zemlak, Daniel and Leannon</td>
            <td>United States</td>
          </tr>
          <tr>
            <th>3</th>
            <td>Brice Swyre</td>
            <td>Tax Accountant</td>
            <td>Carroll Group</td>
            <td>China</td>
          </tr>
          <tr>
            <th>4</th>
            <td>Marjy Ferencz</td>
            <td>Office Assistant I</td>
            <td>Rowe-Schoen</td>
            <td>Russia</td>
          </tr>
          <tr>
            <th>5</th>
            <td>Yancy Tear</td>
            <td>Community Outreach Specialist</td>
            <td>Wyman-Ledner</td>
            <td>Brazil</td>
          </tr>

          <tr>
            <th>19</th>
            <td>Teddie Duerden</td>
            <td>Staff Accountant III</td>
            <td>Pouros, Ullrich and Windler</td>
            <td>France</td>
          </tr>
        </tbody>

      </table> -->

      <!-- Boton pagar todo, boton pagar seleccionado, boton para pagar solo el articulo, resumen de seleccionados, articulos pagados -->
    </div>

    <div class="mt-auto mb-2 mx-2">
      <div class="mb-4 bg-gray-200 rounded p-3">
        <div class="flex items-center">
          <svg xmlns="http://www.w3.org/2000/svg" width="25" height="25" viewBox="0 0 24 24">
            <g fill="none" stroke="#ac2222" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
              <path
                d="M15.093 12.343a2.43 2.43 0 0 0 2.031.956c1.244 0 2.254-.757 2.254-1.691s-1.01-1.69-2.254-1.69s-2.255-.758-2.255-1.692s1.01-1.691 2.255-1.691a2.43 2.43 0 0 1 2.031.956M17.124 13.3v1.126m0-9.018v1.127" />
              <path
                d="M20.354 2.25H3.646A2.646 2.646 0 0 0 1 4.896v10.708a2.646 2.646 0 0 0 2.646 2.646h16.708A2.646 2.646 0 0 0 23 15.604V4.896a2.646 2.646 0 0 0-2.646-2.646M12 18.25v3.5m-5 0h10M4.622 6.689h6.012m-6.012 3.826h6.012m-6.012 3.826h3.006" />
            </g>
          </svg>
          <h2 class="text-neutral-900 font-semibold text-xl ml-3">Eliga un método de pago</h2>
        </div>

        <select class="select select-xl w-full mt-3 bg-neutral-100 text-black">
          <option disabled selected></option>
          <option>Efectivo </option>
          <option>Tarjeta</option>
        </select>
      </div>

      <button class="btn w-full h-10 text-xl bg-blue-800 mt-3 border-none" (click)="paySelected()">Pagar seleccionados </button>
      <button class="btn w-full h-10 text-xl bg-green-800 mt-3 border-none" (click)="payAll()">Pagar todo  <span
          class="text-black font-bold ml-5"> {{totalPayment() | currency}} </span></button>
    </div>

  </div>

</div>
